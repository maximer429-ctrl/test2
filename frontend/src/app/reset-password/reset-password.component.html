<div class="reset-password-container">
  <div class="reset-password-card">
    <h2>Reset Password</h2>

    <div *ngIf="isCheckingToken" class="loading">
      <p>Verifying reset link...</p>
    </div>

    <div *ngIf="!isCheckingToken && !isValidToken" class="error-container">
      <div class="message error">{{ message }}</div>
      <div class="links">
        <a routerLink="/forgot-password">Request New Reset Link</a>
        <span class="separator">|</span>
        <a routerLink="/login">Back to Login</a>
      </div>
    </div>

    <div *ngIf="!isCheckingToken && isValidToken">
      <p class="instructions">
        Please enter your new password below.
      </p>

      <form (ngSubmit)="onSubmit()" #resetPasswordForm="ngForm">
        <div class="form-group">
          <label for="newPassword">New Password</label>
          <input
            type="password"
            id="newPassword"
            name="newPassword"
            [(ngModel)]="newPassword"
            required
            minlength="6"
            placeholder="Enter new password (min 6 characters)"
            [disabled]="isLoading || isSuccess"
          />
        </div>

        <div class="form-group">
          <label for="confirmPassword">Confirm Password</label>
          <input
            type="password"
            id="confirmPassword"
            name="confirmPassword"
            [(ngModel)]="confirmPassword"
            required
            minlength="6"
            placeholder="Confirm new password"
            [disabled]="isLoading || isSuccess"
          />
        </div>

        <div *ngIf="message" [class]="isSuccess ? 'message success' : 'message error'">
          {{ message }}
        </div>

        <button
          type="submit"
          [disabled]="!resetPasswordForm.form.valid || isLoading || isSuccess"
          class="submit-btn"
        >
          {{ isLoading ? 'Resetting...' : isSuccess ? 'Success! Redirecting...' : 'Reset Password' }}
        </button>
      </form>

      <div class="links" *ngIf="!isSuccess">
        <a routerLink="/login">Back to Login</a>
      </div>
    </div>
  </div>
</div>
